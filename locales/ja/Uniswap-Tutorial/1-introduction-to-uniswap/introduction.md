このチュートリアルでは、Uniswap V3スワップコントラクトがシングルホップスワップやマルチホップスワップをする仕組みについて学びます。

まず初めに、Uniswapの基礎について学びます。

## Uniswapとは

Uniswapは、分散型暗号通貨取引所です。 ユーザーは、中央集権型の仲介者を必要とせずにトークンを交換できます。 Uniswapは、分散型ファイナンス(DeFi)スペースにおけるキープレーヤーです。

## Uniswapの仕組み

従来の中央集権化された取引所のようなオーダーブックを使うのではなく、Uniswapでは自動マーケットメーカー(AMM)モデルを使用します。 Uniswapで、AMMはスマートコントラクトであり、トークンのリザーブ(流動性プール)を保持しています。 ユーザーは、流動性プール内でトークン同士の交換ができます。 各トークンの価格は、リザーブの比率によって決定されます。

### ステップバイステップによるUniswap取引例

1. アリスは、ETHをDAIに交換したいとします。
2. Aliceは、1 ETHをUniswapスマートコントラクトに送信します。
3. Uniswapスマートコントラクトは、現在の交換レートを基にしてAliceが受け取るべきDAIの金額を計算します。
4. Uniswapスマートコントラクトは、アリスにDAIを送信します。
5. Uniswapスマートコントラクトは、受け取った1 ETHをリザーブに追加します。
6. Uniswapスマートコントラクトは、更新されたリザーブを基に新しいレートを再計算します。

流動性プールのトークンは、流動性プロバイダーによって提供されます。 流動性プロバイダーがトークンを流動性プールにデポジットすると、流動性プロバイダーは代わりに流動性プロバイダートークンを受け取ります。 流動性プロバイダートークンは、流動性プロバイダーのユーザーの割合(シェア)を表します。

Uniswapのユーザーは、トレードごとに手数料を払います。 手数料は、流動性プロバイダートークンとして流動性プロバイダーに追加で支払われます。

## Uniswapスワップコントラクト

ユーザーは、UniswapスワップコントラクトのV3を使用してトークンのスワップができます。 シングルホップスワップでは、ユーザー1つのトークンをもう一つのトークンと直接交換できます。 V3では、マルチホップスワップも可能で、ユーザーはルーティングによって複数のトークンを経由してトークンを交換できます。 このコンテキストにおいてルーティングが意味するところは、スワップコントラクトがトークンを別のトークンに交換し、その後に別のトークンがもう一つの別のトークンと交換されることを言います。これが、欲しいトークンに交換されるまで行われます。

## 結論

このセクションでは、Uniswapの仕組み、トークンのスワップで必要な知識を学びました。

## ⭐️ 宿題: 多肢選択式テスト

### Uniswapとは何でしょうか？

1. 中央集権型の取引プロトコル
2. オーダーブックを使用する分散型の取引プロトコル
3. 自動マーケットメーカー(AMM)モデルを使用する分散型の取引プロトコル
4. オーダーブックと自動マーケットメーカー(AMM)モデルを使用する分散型の取引プロトコル

### 2) Uniswapでは、どのようにしてトークンの価格を決定するでしょうか？

1. リザーブの比率によってトークンの価格が決定される
2. リザーブの比率と取引数によってトークンの価格が決定される
3. リザーブの比率と流動性プロバイダーの数によってトークンの価格が決定される
