このセクションでは、関数の振る舞いを修正する方法とコントラクトの初期化コードの実行方法を学びます。

### 関数修飾子(modifier)

_関数修飾子(modifier)_ は、関数の振る舞いを変更するのに使用します。 例えば、関数を実行する前にアクセスを制限したり、入力を検証するなどの確認を行うことがよくあります。

このコントラクトの最初の部分は、コントラクトの所有の変更についてです。 コントラクトの所有は、`address`型である`owner`状態変数の値によって表されています(7行目)。

`changeOwner`関数(33行目)で、コントラクトの所有を変更できます。 `address`型の入力パラメータを取り、値を状態変数`owner`に割り当てています。

しかし、この関数は、2つのmodifierが`onlyOwner`と`validAddress`があり、すべての条件において実行できるわけではありません。

まず、`onlyOwner`を見ていきましょう(18行目)。
関数修飾子(modifier)が、 `modifier` キーワードおよび一意の名前で定義されています。また、パラメータが複数あります。

modifier内部にあるアンダースコア「 `_`」(23行目)は、modifierによって変更された関数の以降の本体部分が実行されます。
modifierにあるアンダースコアより前にあるコードは、変更された関数の本体部分のコードより前に実行されます。 アンダースコアより後にあるコードは、変更された関数の本体部分のコードの後に実行されます。

この場合では、 `require`関数(19行目)でコントラクトを実行しているアドレスが`owner`変数に格納されている値と等しいかどうかを確認しています。 等しい場合はコードの残りの部分が実行され、それ以外の場合はエラーを投げます。

`assert`や`require` について詳細を知りたい場合は、<a href="https://docs.soliditylang.org/en/latest/control-structures.html#error-handling-assert-require-revert-and-exceptions" target="_blank">Solidityドキュメント</a>をご覧ください。これらは、条件をチェックして満たさない場合にエラーを投げます。

`validAddress` modifier (28行目)は、 `address`型のパラメータを持ち、提供されたaddressが有効かどうかを確認しています。 有効であれば、コードの実行を続けます。

### コンストラクタ

コンストラクタ関数は、コントラクトの作成時に実行されます。 コントラクトの初期化コードを実行するのに使います。 コンストラクタは、パラメータを持つことができます。コントラクトをデプロイする前に特定の初期化値がわからない場合に有用です。

`constructor`キーワードを使用してコンストラクタを宣言します。 コントラクトのコンストラクタ(11行目)は、コントラクトの作成時にowner変数の最初の値を設定します。

<a href="https://www.youtube.com/watch?v=b6FBWsz7VaI" target="_blank">関数修飾子(modifier)のビデオチュートリアルをご覧ください</a>。

## ⭐️ 演習

1. 新しい関数 `increaseX`をコントラクトに作成します。 この関数は、`uint`型の入力パラメータを取り、入力パラメータの値で変数`x`の値を増やします。
2. xのみが増えることを確認しましょう。
3. 関数`increaseX`の本体は空である必要があります。

ヒント: modifierを使用してください。